<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Colonial Tomb Archive ID - Map</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
        /* Custom Theme Configuration */
        :root {
            --theme-black: #0a0a0a;
            --theme-yellow: #fbbf24; /* Amber-400 */
            --theme-yellow-glow: rgba(251, 191, 36, 0.15);
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background-color: var(--theme-black);
            overflow: hidden; /* Prevent scrolling on full screen map */
        }

        /* Map Container override */
        #map {
            height: 100vh;
            width: 100vw;
            z-index: 1;
            background: #1a1a1a;
        }

        /* Glassmorphism Panels */
        .glass-panel {
            background: rgba(10, 10, 10, 0.85);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(251, 191, 36, 0.3);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }

        /* Scrollbar customization */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #000; 
        }
        ::-webkit-scrollbar-thumb {
            background: #444; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--theme-yellow); 
        }

        /* Leaflet Popup Customization */
        .leaflet-popup-content-wrapper {
            background: rgba(10, 10, 10, 0.95);
            border: 1px solid var(--theme-yellow);
            border-radius: 0px;
            color: #fff;
            font-family: 'Space Grotesk', sans-serif;
        }
        .leaflet-popup-tip {
            background: var(--theme-yellow);
        }
        .leaflet-popup-close-button {
            color: var(--theme-yellow) !important;
        }
    </style>
</head>
<body class="text-white relative">

    <!-- Background Map -->
    <div id="map"></div>

    <!-- Floating Header / Sidebar -->
    <div class="absolute top-4 left-4 z-[1000] w-[90%] md:w-96 flex flex-col gap-4 pointer-events-none">
        
        <!-- Header Card -->
        <div class="glass-panel p-6 pointer-events-auto transition-all hover:border-yellow-400">
            <div class="flex items-center justify-between mb-2">
                <span class="text-xs font-bold text-amber-400 tracking-widest uppercase border border-amber-400 px-2 py-0.5 rounded-sm">Archive ID: 2024</span>
                <div class="w-2 h-2 bg-amber-400 rounded-full animate-pulse"></div>
            </div>
            <h1 class="text-3xl font-bold text-white leading-tight">
                Peta Sebaran <span class="text-amber-400">Makam Kolonial</span>
            </h1>
            <p class="text-gray-400 text-sm mt-3 leading-relaxed">
                Visualisasi data geospasial situs pemakaman Tionghoa era kolonial. Data bersumber dari arsip digital KITLV.
            </p>
        </div>

        <!-- Legend / Info Card -->
        <div class="glass-panel p-5 pointer-events-auto">
            <h3 class="text-amber-400 font-bold uppercase text-xs mb-3 tracking-wider">Statistik Arsip</h3>
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <div class="text-2xl font-bold">142</div>
                    <div class="text-xs text-gray-500">Situs Terdata</div>
                </div>
                <div>
                    <div class="text-2xl font-bold">18</div>
                    <div class="text-xs text-gray-500">Kota Besar</div>
                </div>
            </div>
            <div class="mt-4 pt-4 border-t border-gray-800">
                <button onclick="focusMap()" class="w-full bg-amber-500/10 hover:bg-amber-500 hover:text-black text-amber-400 text-sm font-bold py-2 px-4 border border-amber-500/50 transition-all duration-300 uppercase tracking-wider">
                    Reset Pandangan
                </button>
            </div>
        </div>
    </div>

    <!-- Bottom Right Controls -->
    <div class="absolute bottom-8 right-4 z-[1000] flex flex-col gap-2 pointer-events-none">
        <div class="glass-panel p-3 pointer-events-auto">
            <div class="text-[10px] text-amber-400 uppercase tracking-widest text-right">
                System Status: Online<br>
                Lat: <span id="lat-display">-6.2000</span><br>
                Lng: <span id="lng-display">106.8166</span>
            </div>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <script>
        // 1. Initialize Map
        // Centered on Java, Indonesia
        const map = L.map('map', {
            zoomControl: false, // We'll add zoom control elsewhere or rely on scroll
            attributionControl: false
        }).setView([-6.9, 110.4], 7);

        // 2. Add Dark Theme Tiles (CartoDB Dark Matter)
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd',
            maxZoom: 20
        }).addTo(map);

        // Add Zoom Control to bottom right
        L.control.zoom({
            position: 'bottomright'
        }).addTo(map);

        // 3. Custom Marker Icon (Yellow/Black)
        const customIcon = L.divIcon({
            className: 'custom-div-icon',
            html: `
                <div style="
                    background-color: #fbbf24;
                    width: 12px;
                    height: 12px;
                    border-radius: 50%;
                    border: 2px solid #000;
                    box-shadow: 0 0 10px #fbbf24;
                "></div>
            `,
            iconSize: [12, 12],
            iconAnchor: [6, 6],
            popupAnchor: [0, -10]
        });

        // 4. Mock Data (Locations of historical interest)
        const locations = [
            {
                title: "Tanah Abang (Old Cemetery)",
                loc: [-6.1878, 106.8135],
                desc: "Bekas pemakaman tua di pusat Batavia.",
                year: "1790"
            },
            {
                title: "Peneleh",
                loc: [-7.2575, 112.7378],
                desc: "Makam Eropa dan Tionghoa bersejarah di Surabaya.",
                year: "1840"
            },
            {
                title: "Bukit Sentiong",
                loc: [-6.9932, 110.4203],
                desc: "Area pemakaman bukit tradisional di Semarang.",
                year: "1810"
            },
            {
                title: "Gunung Gadung",
                loc: [-6.6211, 106.8175],
                desc: "Kompleks pemakaman luas di area Bogor.",
                year: "1900"
            },
            {
                title: "Klenteng Sam Poo Kong",
                loc: [-6.9961, 110.3980],
                desc: "Area historis dengan peninggalan makam tua.",
                year: "1720"
            }
        ];

        // 5. Add Markers to Map
        locations.forEach(site => {
            const marker = L.marker(site.loc, {icon: customIcon}).addTo(map);
            
            const popupContent = `
                <div class="p-1 min-w-[200px]">
                    <div class="text-xs text-amber-400 font-bold uppercase mb-1">Est. ${site.year}</div>
                    <h3 class="text-lg font-bold text-white mb-2">${site.title}</h3>
                    <p class="text-sm text-gray-300 leading-snug">${site.desc}</p>
                </div>
            `;
            
            marker.bindPopup(popupContent);
        });

        // 6. Interaction Logic
        function focusMap() {
            map.flyTo([-6.9, 110.4], 7, {
                animate: true,
                duration: 1.5
            });
        }

        // Update coordinates display on mouse move
        map.on('mousemove', function(e) {
            document.getElementById('lat-display').innerText = e.latlng.lat.toFixed(4);
            document.getElementById('lng-display').innerText = e.latlng.lng.toFixed(4);
        });

    </script>
</body>
</html>
